<section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <!-- Grid Container -->
  <div
    class="grid gap-4 sm:gap-6"
    [ngClass]="{
      'grid-cols-1 xs:grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-5': true
    }"
  >
    <!-- Card para añadir nueva adopción (solo para administración) -->
    <div
      *ngIf="administration && dataSource && dataSource.length > 0"
      class="group relative"
    >
      <div
        class="bg-gradient-to-br from-white to-gray-50 rounded-2xl border-2 border-dashed border-gray-300 hover:border-orange-300 shadow-sm hover:shadow-xl overflow-hidden transform transition-all duration-300 hover:-translate-y-1.5 cursor-pointer h-full flex flex-col"
        (click)="newEmitter()"
      >
        <!-- Contenedor de imagen con overlay -->
        <div
          class="relative aspect-[1/1] overflow-hidden bg-gradient-to-br from-orange-50 to-amber-50"
        >
          <!-- Imagen con efecto hover -->
          <img
            src="https://res.cloudinary.com/dfnywietn/image/upload/v1764710632/zrou6sk3ovzdpsqi7la8.png"
            class="w-full h-full object-contain p-8 transition-transform duration-500 group-hover:scale-110"
          />

          <!-- Overlay gradient hover -->
          <div
            class="absolute inset-0 bg-gradient-to-t from-orange-500/10 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"
          ></div>

          <!-- Icono plus flotante -->
          <div
            class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"
          >
            <div
              class="w-14 h-14 rounded-full bg-gradient-to-r from-orange-500 to-amber-500 shadow-lg flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 transform group-hover:scale-110"
            >
              <span class="material-icons text-white text-2xl">add</span>
            </div>
          </div>
        </div>

        <!-- Contenido de la tarjeta -->
        <div class="p-4 text-center flex-grow flex flex-col justify-center">
          <h6
            class="text-gray-900 font-semibold text-sm sm:text-base mb-1 truncate"
          >
            Añadir adopción
          </h6>
          <p class="text-gray-500 text-xs sm:text-sm">Nueva historia</p>
        </div>

        <!-- Indicador hover -->
        <div
          class="absolute bottom-3 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-300"
        >
          <div
            class="w-8 h-1 rounded-full bg-gradient-to-r from-orange-500 to-amber-500"
          ></div>
        </div>
      </div>
    </div>

    <!-- Cards de mascotas -->
    <div *ngFor="let pet of dataSource" class="group relative">
      <div
        class="bg-white rounded-2xl shadow-lg hover:shadow-2xl overflow-hidden transform transition-all duration-300 hover:-translate-y-2 cursor-pointer h-full flex flex-col border border-gray-100"
        (click)="getUrl(pet?.id || pet?._id || pet?.uid)"
      >
        <!-- Contenedor de imagen -->
        <div class="relative aspect-[1/1] overflow-hidden">
          <!-- Imagen principal -->
          <img
            [src]="getPetImage(pet)"
            alt="{{ pet?.name }}"
            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
            onerror="this.src='https://images.unsplash.com/photo-1518717758536-85ae29035b6d?w=800&h=800&fit=crop&crop=center'"
          />

          <!-- Overlay gradient -->
          <div
            class="absolute inset-0 bg-gradient-to-t from-black/30 via-black/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"
          ></div>

          <!-- Badge de estado (si está adoptado) -->
          <div *ngIf="pet?.adoptionAt" class="absolute top-3 left-3">
            <div
              class="flex items-center gap-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-3 py-1.5 rounded-full shadow-lg"
            >
              <span class="material-icons text-xs">pets</span>
              <span class="text-xs font-bold">ADOPTADO</span>
            </div>
          </div>

          <!-- Contador de favoritos (si está adoptado) -->
          <div
            *ngIf="pet?.adoptionAt && pet?.favorites"
            class="absolute top-3 right-3"
          >
            <div
              class="flex items-center gap-1 bg-black/70 backdrop-blur-sm text-white px-3 py-1.5 rounded-full"
            >
              <span class="material-icons text-xs text-amber-300">star</span>
              <span class="text-xs font-bold">{{ pet?.favorites }}</span>
            </div>
          </div>

          <!-- Badge de ciudad -->
          <div
            class="absolute bottom-3 left-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300"
          >
            <div
              class="bg-black/70 backdrop-blur-sm text-white px-2 py-1 rounded-lg text-xs"
            >
              <span class="material-icons align-text-bottom text-xs"
                >location_on</span
              >
              {{ pet?.distance || 0 }} Km
            </div>
          </div>

          <!-- Indicador hover para ver detalles -->
          <div
            class="absolute bottom-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300"
          >
            <div
              class="w-8 h-8 rounded-full bg-gradient-to-r from-orange-500 to-amber-500 flex items-center justify-center shadow-lg"
            >
              <span class="material-icons text-white text-sm">visibility</span>
            </div>
          </div>
        </div>

        <!-- Contenido de la tarjeta -->
        <div class="p-4 flex-grow flex flex-col">
          <!-- Nombre de la mascota -->
          <h6
            class="text-gray-900 font-bold text-sm sm:text-base mb-1 truncate"
          >
            {{ pet?.name || pet?.petdto[0]?.name || "Sin nombre" }}
          </h6>

          <!-- Información adicional -->
          <div class="flex flex-wrap gap-1.5 mt-2 mb-1">
            <!-- Raza (si existe) -->
            <span
              *ngIf="pet?.breed"
              class="inline-flex items-center gap-1 bg-orange-50 text-orange-700 px-2 py-0.5 rounded-full text-xs"
            >
              <span class="material-icons text-xs">pets</span>
              {{ pet.breed }}
            </span>
            <span
              *ngIf="pet?.userdto"
              class="inline-flex items-center gap-1 bg-orange-50 text-orange-700 px-2 py-0.5 rounded-full text-xs"
            >
              <span class="material-icons text-xs">person</span>
              {{ pet?.userdto[0]?.username }}
            </span>
            <!-- Edad (si existe) -->
            <span
              *ngIf="pet?.age"
              class="inline-flex items-center gap-1 bg-blue-50 text-blue-700 px-2 py-0.5 rounded-full text-xs"
            >
              <span class="material-icons text-xs">cake</span>
              {{ pet.age }} años
            </span>

            <!-- Tamaño (si existe) -->
            <span
              *ngIf="pet?.size"
              class="inline-flex items-center gap-1 bg-purple-50 text-purple-700 px-2 py-0.5 rounded-full text-xs"
            >
              <span class="material-icons text-xs">straighten</span>
              {{ pet.size }}
            </span>
          </div>

          <!-- Estado (si no está adoptado) -->
          <div
            *ngIf="!pet?.adoptionAt"
            class="pt-3 border-t border-gray-100 mt-auto"
          >
            <div class="flex items-center justify-between">
              <span class="text-xs text-gray-600"> Buscando hogar </span>
              <div class="flex items-center gap-1 text-amber-500">
                <span class="material-icons text-sm">location_on</span>
                <span class="text-xs font-medium"
                  >{{ pet?.distance || 0 }} Km</span
                >
              </div>
            </div>
          </div>
        </div>

        <!-- Efecto hover border -->
        <div
          class="absolute inset-0 rounded-2xl border-2 border-transparent group-hover:border-orange-300 transition-all duration-300 pointer-events-none"
        ></div>
      </div>
    </div>
  </div>

  <!-- Mensaje cuando no hay mascotas -->
  <div *ngIf="dataSource && dataSource.length === 0" class="text-center py-16">
    <div class="max-w-md mx-auto">
      <div
        class="w-20 h-20 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center mx-auto mb-4"
      >
        <span class="material-icons text-3xl text-gray-400">pets</span>
      </div>
      <h3 class="text-xl font-semibold text-gray-900 mb-2">
        No hay mascotas disponibles
      </h3>
      <p class="text-gray-600 mb-6">
        Pronto tendremos nuevos amigos esperando por un hogar.
      </p>
      <button
        *ngIf="administration"
        (click)="newEmitter()"
        class="inline-flex items-center gap-2 bg-gradient-to-r from-orange-500 to-amber-500 text-white px-6 py-3 rounded-full font-medium hover:shadow-lg transition-shadow duration-300 cursor-pointer"
      >
        <span class="material-icons">add</span>
        Añadir primera mascota
      </button>
    </div>
  </div>
</section>
